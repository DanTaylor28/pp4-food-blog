{% extends 'base.html' %}
{% block title %}
{{ post.title }}
{% endblock %}

{% block content %}

<h1>{{ post.title }}</h1>
<small>By: {{ post.author }}</small>
<hr>
<br>
{{ post.body }}
<br><br>
<div class="dropdown">
  {% if user.is_authenticated %}
    <button class="btn btn-dark dropdown-toggle btn-sm" type="button" data-bs-toggle="dropdown" aria-expanded="false">
      Edit/Delete
    </button>
    <ul class="dropdown-menu dropdown-menu-secondary">
      <li><a class="dropdown-item active" href="{% url 'edit_post' post.slug %}">Edit This Post</a></li>
      <li><a class="dropdown-item" href="{% url 'delete_post' post.slug %}">Delete</a></li>
    </ul>
  {% endif %}
  <a href="{% url 'home' %}" class="btn btn-dark btn-sm">Back To Homepage</a>
</div>
<br>
<h4>Join the conversation</h4>
<hr>
{% if post.comments.all %}

  {% for comment in post.comments.all %}
    <small><strong>By: {{ comment.name }} on {{ comment.date_commented }}</strong></small>
    <br>
    {{ comment.body }}
    <br><br>
  {% endfor %}

{% else %}

  This post has no comments yet..
  <br><br>
  
{% endif %}
{% if user.is_authenticated %}
  <a href="#" class="btn btn-sm allauth-btn">Add Comment</a>
{% else %}

  Please <a href="{% url 'account_login' %}" class="signin-link">sign in</a> to leave a comment

{% endif %}

{% endblock %}